{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\camil\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\BD\\\\blogPessoal--React-\\\\src\\\\componentes\\\\temas\\\\cadastroTema\\\\CadastroTema.tsx\",\n  _s = $RefreshSig$();\nimport { Button, Container, TextField, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { buscaId, post, put } from '../../../services/Service';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction CadastroTema() {\n  _s();\n  let navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  const token = useSelector(state => state.token);\n  const [tema, setTema] = useState({\n    id: 0,\n    descricao: ''\n  });\n  useEffect(() => {\n    if (token === '') {\n      toast.info('Você precisa estar logado!', {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"dark\"\n      });\n      navigate('/login');\n    }\n  }, [token]);\n  function updateModel(event) {\n    setTema({\n      ...tema,\n      [event.target.name]: event.target.value\n    });\n  }\n  async function findById(id) {\n    await buscaId(`/temas/${id}`, setTema, {\n      headers: {\n        Authorization: token\n      }\n    });\n  }\n  useEffect(() => {\n    if (id !== undefined) {\n      findById(id);\n    }\n  }, [id]);\n  async function onSubmit(event) {\n    event.preventDefault();\n    if (id !== undefined) {\n      try {\n        // sempre vai tentar essa parte\n        await put('/temas', tema, setTema, {\n          headers: {\n            Authorization: token\n          }\n        });\n        toast.success('Tema cadastrado com sucesso!', {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n          theme: \"dark\"\n        });\n      } catch {\n        // se der ruim, vem pra ca\n        toast.error('Erro no cadastro, por favor confira os campos!', {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n          theme: \"dark\"\n        });\n      }\n    } else {\n      try {\n        // sempre vai tentar essa parte\n        await post('/temas', tema, setTema, {\n          headers: {\n            Authorization: token\n          }\n        });\n        toast.success('Tema cadastrado com sucesso!', {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n          theme: \"dark\"\n        });\n      } catch {\n        // se der ruim, vem pra ca\n        toast.error('Erro no cadastro, por favor confira os campos!', {\n          position: \"top-right\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n          theme: \"dark\"\n        });\n      }\n    }\n    back();\n  }\n  function back() {\n    navigate('/temas');\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"sm\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h3\",\n          align: \"center\",\n          children: tema.id !== 0 ? 'Edite o tema' : 'Cadastre um tema'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          value: tema.descricao,\n          onChange: event => updateModel(event),\n          name: \"descricao\",\n          id: \"descricao\",\n          label: \"Descri\\xE7\\xE3o do tema\",\n          variant: \"outlined\",\n          fullWidth: true,\n          margin: \"dense\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          type: \"submit\",\n          color: \"primary\",\n          children: \"Cadastrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(CadastroTema, \"RZgliDpdvMCvHCNaUi//dEz3fRI=\", false, function () {\n  return [useNavigate, useParams, useSelector];\n});\n_c = CadastroTema;\nexport default CadastroTema;\nvar _c;\n$RefreshReg$(_c, \"CadastroTema\");","map":{"version":3,"names":["Button","Container","TextField","Typography","React","useEffect","useState","buscaId","post","put","useNavigate","useParams","useSelector","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","CadastroTema","_s","navigate","id","token","state","tema","setTema","descricao","info","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","updateModel","event","target","name","value","findById","headers","Authorization","onSubmit","preventDefault","success","error","back","children","maxWidth","variant","align","fileName","_jsxFileName","lineNumber","columnNumber","onChange","label","fullWidth","margin","type","color","_c","$RefreshReg$"],"sources":["C:/Users/camil/OneDrive/Área de Trabalho/BD/blogPessoal--React-/src/componentes/temas/cadastroTema/CadastroTema.tsx"],"sourcesContent":["import { Button, Container, TextField, Typography } from '@material-ui/core';\r\nimport React, { ChangeEvent, useEffect, useState } from 'react';\r\nimport useLocalStorage from 'react-use-localstorage';\r\nimport Tema from '../../../models/Tema';\r\nimport { buscaId, post, put } from '../../../services/Service';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { TokenState } from '../../../store/tokens/tokensReducer';\r\nimport { toast } from 'react-toastify';\r\n\r\nfunction CadastroTema() {\r\n  let navigate = useNavigate();\r\n  const { id } = useParams<{ id: string }>();\r\n  const token = useSelector<TokenState, TokenState['token']>(\r\n    (state) => state.token\r\n  );\r\n  const [tema, setTema] = useState<Tema>({\r\n    id: 0,\r\n    descricao: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (token === '') {\r\n      toast.info('Você precisa estar logado!', {\r\n        position: \"top-right\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        theme: \"dark\",\r\n        });\r\n      navigate('/login');\r\n    }\r\n  }, [token]);\r\n\r\n  function updateModel(event: ChangeEvent<HTMLInputElement>) {\r\n    setTema({\r\n      ...tema,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  }\r\n\r\n  async function findById(id: string) {\r\n    await buscaId(`/temas/${id}`, setTema, {\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (id !== undefined) {\r\n      findById(id);\r\n    }\r\n  }, [id]);\r\n\r\n  async function onSubmit(event: ChangeEvent<HTMLFormElement>) {\r\n    event.preventDefault();\r\n    if (id !== undefined) {\r\n      try {\r\n        // sempre vai tentar essa parte\r\n        await put('/temas', tema, setTema, {\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n        });\r\n        toast.success('Tema cadastrado com sucesso!', {\r\n          position: \"top-right\",\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n          theme: \"dark\",\r\n          });\r\n      } catch {\r\n        // se der ruim, vem pra ca\r\n        toast.error('Erro no cadastro, por favor confira os campos!', {\r\n          position: \"top-right\",\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n          theme: \"dark\",\r\n          });\r\n      }\r\n    } else {\r\n      try {\r\n        // sempre vai tentar essa parte\r\n        await post('/temas', tema, setTema, {\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n        });\r\n        toast.success('Tema cadastrado com sucesso!', {\r\n          position: \"top-right\",\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n          theme: \"dark\",\r\n          });\r\n      } catch {\r\n        // se der ruim, vem pra ca\r\n        toast.error('Erro no cadastro, por favor confira os campos!', {\r\n          position: \"top-right\",\r\n          autoClose: 5000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n          theme: \"dark\",\r\n          });\r\n      }\r\n    }\r\n    back();\r\n  }\r\n\r\n  function back() {\r\n    navigate('/temas');\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Container maxWidth=\"sm\">\r\n        <form onSubmit={onSubmit}>\r\n          <Typography variant=\"h3\" align=\"center\">\r\n            {/* if ternario */} \r\n            {tema.id !== 0 ? 'Edite o tema' : 'Cadastre um tema'}\r\n          </Typography>\r\n          <TextField\r\n            value={tema.descricao}\r\n            onChange={(event: ChangeEvent<HTMLInputElement>) =>\r\n              updateModel(event)\r\n            }\r\n            name=\"descricao\"\r\n            id=\"descricao\"\r\n            label=\"Descrição do tema\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            margin=\"dense\"\r\n          />\r\n\r\n          <Button variant=\"contained\" type=\"submit\" color=\"primary\">\r\n            Cadastrar\r\n          </Button>\r\n        </form>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CadastroTema;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}